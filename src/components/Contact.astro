<p class="text-center mb-1 font-normal text-slate-800 dark:text-slate-200">
  Aprendamos unos de otros, me gustaría brindar mis conocimientos, seguir <br />
  adquiriendo experiencia y hacer mejores proyectos. ¡No dudes en contactarnos!
</p>

<div class="animate-fade animate-once animate-duration-[9000ms] isolate px-6 pt-3 pb-9 sm:pt-2 sm:pb-2 lg:px-8 mb-2">
  <form
    id="contact-form"  name="contact"
    method="POST"
    action="/" data-netlify="true"
    netlify-honeypot="bot-field"
    class="mx-auto mt-6 max-w-xl sm:mt-8" netlify
  >
    <input type="hidden" name="form-name" value="contacto" />

    <p hidden>
      <label>No llenar: <input name="bot-field" /></label>
    </p>

    <div class="grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2">
      <div>
        <label for="first-name" class="block text-sm/6 font-semibold text-slate-800 dark:text-slate-200">
          Primer Nombre
        </label>
        <div class="mt-2.5">
          <input type="text" name="first-name" id="first-name" autocomplete="given-name"
          class="block w-full rounded-md bg-white dark:bg-gray-200 px-3.5 py-2 text-base text-gray-900
          outline-1 -outline-offset-1  outline-gray-300 placeholder:text-gray-400
          focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-300" placeholder="Juan" />
        </div>
      </div>

      <div>
        <label for="last-name" class="block text-sm/6 font-semibold text-slate-800 dark:text-slate-200">
          Apellido
        </label>
        <div class="mt-2.5">
          <input type="text" name="last-name" id="last-name" autocomplete="family-name"
          class="block w-full rounded-md bg-white dark:bg-gray-200 px-3.5 py-2 text-base text-gray-900
          outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400
          focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-300" placeholder="Perez" />
        </div>
      </div>

      <div class="sm:col-span-2">
        <label for="phone-number" class="block text-sm/6 font-semibold text-slate-800 dark:text-slate-200">
          Teléfono
        </label>
        <div class="mt-2.5">
          <div class="flex rounded-md bg-white dark:bg-gray-200 outline-1 -outline-offset-1
          outline-gray-300 has-[input:focus-within]:outline-2 has-[input:focus-within]:-outline-offset-2
          has-[input:focus-within]:outline-indigo-300">
            <input type="text" name="phone-number" id="phone-number"
            class="block min-w-0 grow py-1.5 pr-3 pl-1 text-base text-gray-900
            placeholder:text-gray-400 focus:outline-none sm:text-sm/6" placeholder="+54 9 1111132222" />
          </div>
        </div>
      </div>

      <div class="sm:col-span-2">
        <label for="email" class="block text-sm/6 font-semibold text-slate-800 dark:text-slate-200">
          Email
        </label>
        <div class="mt-2.5">
          <input type="email" name="email" id="email" autocomplete="email"
          class="block w-full rounded-md bg-white dark:bg-gray-200 px-3.5 py-2 text-base text-gray-900
          outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400
          focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-300" placeholder="juanperez@gmail.com"/>
        </div>
      </div>

      <div class="sm:col-span-2">
        <label for="subject" class="block text-sm/6 font-semibold text-slate-800 dark:text-slate-200">
          Asunto
        </label>
        <div class="mt-2.5">
          <input type="text" name="subject" id="subject" autocomplete="subject"
          class="block w-full rounded-md bg-white dark:bg-gray-200 px-3.5 py-2 text-base text-gray-900
          outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400
          focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-300" />
        </div>
      </div>

      <div class="sm:col-span-2">
        <label for="message" class="block text-sm/6 font-semibold text-slate-800 dark:text-slate-200">
          Mensaje
        </label>
        <div class="mt-2.5">
          <textarea name="message" id="message" rows="4"
          class="block w-full rounded-md bg-white dark:bg-gray-200 px-3.5 py-2 text-base text-gray-900
          outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400
          focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-300"></textarea>
        </div>
      </div>
    </div>

    <div class="mt-10">
      <button type="submit" class="block w-full rounded-md
      bg-indigo-500 px-3.5 py-2.5 text-center text-sm font-semibold text-white shadow-xs
      hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2
      focus-visible:outline-indigo-600">
        Enviar Mensaje
      </button>
    </div>
  </form>
</div>

<div id="popup" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50">
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center max-w-sm">
    <h2 class="text-lg font-semibold text-gray-900 dark:text-white">¡Mensaje enviado!</h2>
    <p class="mt-2 text-sm text-gray-700 dark:text-gray-300">
      Gracias por contactarte, responderé pronto.
    </p>
    <button
      type="button"
      id="close-popup" class="mt-4 px-4 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600">
      Cerrar
    </button>
  </div>
</div>


<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("contact-form"); // Select by ID
    const popup = document.getElementById("popup");
    const closeBtn = document.getElementById("close-popup"); // Select by ID

    // Type checking for TypeScript, helpful but not strictly necessary for plain JS
    if (!(form instanceof HTMLFormElement) || !(popup instanceof HTMLDivElement) || !(closeBtn instanceof HTMLButtonElement)) {
        console.error("One or more elements not found. Form, popup, or close button.");
        return;
    }

    form.addEventListener("submit", async (event) => {
      event.preventDefault(); // Prevent default form submission and page reload

      const data = new FormData(form);
      // Netlify requires the form-name field to be present in the submission
      // even if it's hidden. FormData handles this automatically.

      try {
        // Submit the form data to Netlify
        // Netlify will detect the form based on the `name` attribute and `data-netlify="true"`
        // The action="/" is fine for Netlify.
        await fetch("/", {
          method: "POST",
          body: data, // FormData object can be passed directly
        });

        form.reset(); // Clear the form fields
        popup.classList.remove("hidden"); // Show the modal
      } catch (error) {
        alert("Hubo un error al enviar el mensaje: " + error.message);
      }
    });

    closeBtn.addEventListener("click", () => {
      popup.classList.add("hidden"); // Hide the modal
    });
  });
</script>